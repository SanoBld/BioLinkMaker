<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BioLink Maker â€” CrÃ©ez votre page de liens</title>

  <!-- â”€â”€ Tailwind CSS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- â”€â”€ Google Fonts : 4 familles disponibles â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,300&family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=JetBrains+Mono:wght@300;400;500&display=swap" rel="stylesheet" />

  <!-- â”€â”€ Font Awesome 6 : icÃ´nes UI + marques sociales â”€â”€â”€â”€â”€â”€â”€ -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <style>

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       VARIABLES & BASE TYPOGRAPHY
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    :root {
      --font-display : 'Syne', sans-serif;
      --font-body    : 'DM Sans', sans-serif;
    }

    *                          { font-family: var(--font-body); }
    h1, h2, h3, .font-display { font-family: var(--font-display); }

    /* Surcharge de police selon le choix du crÃ©ateur */
    body.font-inter    * { font-family: 'Inter', sans-serif !important; }
    body.font-playfair * { font-family: 'Playfair Display', serif !important; }
    body.font-mono     * { font-family: 'JetBrains Mono', monospace !important; }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BRUIT DE FOND (noise texture superposÃ©)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    body::before {
      content    : '';
      position   : fixed;
      inset      : 0;
      background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)' opacity='0.04'/%3E%3C/svg%3E");
      pointer-events : none;
      z-index    : 999;
      opacity    : 0.35;
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCROLLBAR PERSONNALISÃ‰E
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    ::-webkit-scrollbar        { width: 4px; }
    ::-webkit-scrollbar-track  { background: #0f172a; }
    ::-webkit-scrollbar-thumb  { background: #334155; border-radius: 2px; }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       BORDURE GRADIENT ANIMÃ‰E (glow-border)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @keyframes borderGlow {
      0%, 100% { opacity: 0.5; }
      50%      { opacity: 1;   }
    }
    .glow-border { position: relative; }
    .glow-border::before {
      content         : '';
      position        : absolute;
      inset           : -1px;
      border-radius   : inherit;
      padding         : 1px;
      background      : linear-gradient(135deg, #6366f1, #8b5cf6, #06b6d4);
      -webkit-mask    : linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite  : exclude;
      animation       : borderGlow 3s ease-in-out infinite;
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       ANIMATIONS D'ENTRÃ‰E
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(16px); }
      to   { opacity: 1; transform: translateY(0);    }
    }
    .link-item { animation: slideUp 0.3s ease forwards; }

    @keyframes fadeSlide {
      from { opacity: 0; transform: translateY(20px); }
      to   { opacity: 1; transform: translateY(0);    }
    }
    .visitor-link {
      animation : fadeSlide 0.5s ease forwards;
      opacity   : 0;
    }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       AVATAR PULSE
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @keyframes avatarPulse {
      0%, 100% { box-shadow: 0 0 0 0   rgba(99,102,241,0.4); }
      50%      { box-shadow: 0 0 0 14px rgba(99,102,241,0);   }
    }
    .avatar-pulse { animation: avatarPulse 2.8s ease-in-out infinite; }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       THÃˆMES DE BOUTONS â€” page visiteur
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .theme-blue        { background: linear-gradient(135deg, #3b82f6, #1d4ed8); color: #fff; }
    .theme-blue:hover  { background: linear-gradient(135deg, #60a5fa, #3b82f6); }

    .theme-insta       { background: linear-gradient(135deg, #f59e0b, #ec4899, #8b5cf6); color: #fff; }
    .theme-insta:hover { filter: brightness(1.1); }

    .theme-black       { background: #000; color: #fff; border: 1px solid #333; }
    .theme-black:hover { background: #1a1a1a; }

    .theme-green       { background: linear-gradient(135deg, #10b981, #059669); color: #fff; }
    .theme-green:hover { background: linear-gradient(135deg, #34d399, #10b981); }

    .theme-rose        { background: linear-gradient(135deg, #f43f5e, #e11d48); color: #fff; }
    .theme-rose:hover  { background: linear-gradient(135deg, #fb7185, #f43f5e); }

    .theme-glass       { background: rgba(255,255,255,0.10); color: #fff; border: 1px solid rgba(255,255,255,0.20); backdrop-filter: blur(10px); }
    .theme-glass:hover { background: rgba(255,255,255,0.18); }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FONDS PAGE VISITEUR â€” MODE SOMBRE (dÃ©faut)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .vbg-dark-blue  { background: linear-gradient(160deg, #0f172a 0%, #1e3a5f 100%); }
    .vbg-dark-insta { background: linear-gradient(160deg, #1a0a2e 0%, #3d1342 50%, #1a2540 100%); }
    .vbg-dark-black { background: #000; }
    .vbg-dark-green { background: linear-gradient(160deg, #052e16 0%, #0f172a 100%); }
    .vbg-dark-rose  { background: linear-gradient(160deg, #1f0a10 0%, #0f172a 100%); }
    .vbg-dark-glass { background: linear-gradient(160deg, #0f172a 0%, #1e293b 100%); }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       FONDS PAGE VISITEUR â€” MODE CLAIR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .vbg-light-blue  { background: linear-gradient(160deg, #eff6ff 0%, #dbeafe 100%); }
    .vbg-light-insta { background: linear-gradient(160deg, #fdf2f8 0%, #f3e8ff 50%, #dbeafe 100%); }
    .vbg-light-black { background: #f8fafc; }
    .vbg-light-green { background: linear-gradient(160deg, #ecfdf5 0%, #d1fae5 100%); }
    .vbg-light-rose  { background: linear-gradient(160deg, #fff1f2 0%, #fce7f3 100%); }
    .vbg-light-glass { background: linear-gradient(160deg, #f1f5f9 0%, #e2e8f0 100%); }

    /* Textes page visiteur en mode clair */
    .visitor-light #v-name           { color: #1e293b !important; }
    .visitor-light #v-bio            { color: #475569 !important; }
    .visitor-light .visitor-watermark { color: #94a3b8 !important; }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       URL DISPLAY â€” <textarea readonly> stylisÃ©
       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       Un <textarea> est NATIVEMENT sÃ©lectionnable et copiable
       sur tous les navigateurs et mobiles, contrairement Ã  un <div>.
       readonly empÃªche l'Ã©dition mais autorise la sÃ©lection.
       onclick="this.select()" sÃ©lectionne tout en un tap.
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    #url-display {
      /* Typographie */
      font-family        : 'JetBrains Mono', 'Courier New', monospace;
      font-size          : 0.72rem;
      line-height        : 1.6;
      letter-spacing     : 0.01em;
      color              : #cbd5e1;                /* slate-300 */

      /* Fond & bordures */
      background-color   : #1e293b;               /* slate-800 */
      border             : 1.5px solid #334155;   /* slate-700 */
      border-radius      : 0.75rem;               /* rounded-xl */

      /* Dimensions & scroll */
      width              : 100%;
      min-height         : 4.5rem;
      max-height         : 7rem;
      resize             : none;
      overflow-y         : auto;
      overflow-x         : hidden;

      /* Espacement */
      padding            : 0.875rem 1rem;

      /* Forcer la sÃ©lection â€” clÃ© du fix mobile */
      user-select        : text;
      -webkit-user-select: text;
      cursor             : text;

      /* Supprimer l'outline natif (remplacÃ© par box-shadow focus) */
      outline            : none;

      /* Transition hover/focus */
      transition         : border-color 0.2s ease, box-shadow 0.2s ease;

      /* Pas de retour Ã  la ligne brutal */
      word-break         : break-all;
      white-space        : pre-wrap;
    }

    /* Ã‰tat focus/hover â€” feedback visuel clair */
    #url-display:hover {
      border-color : #4f46e5;               /* indigo-600 */
    }
    #url-display:focus {
      border-color : #6366f1;               /* indigo-500 */
      box-shadow   : 0 0 0 3px rgba(99, 102, 241, 0.18);
    }

    /* Ã‰tat succÃ¨s copie */
    #url-display.copy-success {
      border-color : #10b981;
      box-shadow   : 0 0 0 3px rgba(16, 185, 129, 0.18);
    }

    /* Scrollbar interne de la textarea */
    #url-display::-webkit-scrollbar        { width: 3px; }
    #url-display::-webkit-scrollbar-track  { background: #1e293b; }
    #url-display::-webkit-scrollbar-thumb  { background: #475569; border-radius: 2px; }


    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       Ã‰TAT ACTIF DES BOUTONS D'OPTION
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .opt-active {
      border-color     : #6366f1 !important;
      background-color : rgba(99, 102, 241, 0.10) !important;
      color            : #a5b4fc !important;
    }

  </style>
</head>
<body class="bg-slate-950 text-slate-100 min-h-screen">


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â–ˆâ–ˆ  CREATOR INTERFACE
     Visible uniquement si ?p= est ABSENT de l'URL.
     SupprimÃ© du DOM avec .remove() si ?p= est prÃ©sent.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="creator-app">

  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       NAVIGATION â€” sticky, glassmorphism
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <nav class="border-b border-slate-800 bg-slate-950/80 backdrop-blur-xl sticky top-0 z-50">
    <div class="max-w-5xl mx-auto px-4 sm:px-6 h-14 flex items-center justify-between">

      <!-- Logo -->
      <div class="flex items-center gap-2">
        <div class="w-7 h-7 rounded-lg bg-gradient-to-br from-indigo-500 to-violet-600
                    flex items-center justify-center">
          <i class="fa-solid fa-link text-white text-xs"></i>
        </div>
        <span class="font-display font-700 text-sm tracking-tight">
          BioLink<span class="text-indigo-400">Maker</span>
        </span>
      </div>

      <!-- Actions -->
      <div class="flex items-center gap-2">

        <!-- Badge info -->
        <span class="hidden sm:inline text-xs text-slate-500 bg-slate-900 border border-slate-800
                     px-2.5 py-1 rounded-full">
          100% URL Â· Sans BDD
        </span>

        <!-- â”€â”€ Toggle Mode Jour / Nuit de la page visiteur â”€â”€
             La lune/soleil contrÃ´le l'apparence que verront les visiteurs.
             DÃ©tection automatique du schÃ©ma systÃ¨me au chargement.
        â”€â”€â”€ -->
        <button id="mode-toggle-btn" onclick="togglePageMode()"
          title="Basculer le mode de la page visiteur (sombre / clair)"
          class="flex items-center gap-1.5 text-xs text-slate-400 hover:text-indigo-300
                 bg-slate-900 border border-slate-800 hover:border-indigo-500/50
                 px-3 py-1.5 rounded-full transition-all duration-200">
          <i id="mode-icon" class="fa-solid fa-moon text-indigo-400 text-[11px]"></i>
          <span id="mode-label" class="hidden sm:inline">Page sombre</span>
        </button>

      </div>
    </div>
  </nav>


  <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
       GRILLE PRINCIPALE : 5 colonnes (3 Ã©diteur + 2 preview)
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
  <div class="max-w-5xl mx-auto px-4 sm:px-6 py-10 grid lg:grid-cols-5 gap-8">


    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PANNEAU GAUCHE : Ã‰diteur
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="lg:col-span-3 space-y-6">

      <!-- Titre de page -->
      <div>
        <h1 class="font-display text-3xl font-800 leading-tight">
          CrÃ©ez votre
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-violet-400">
            page de liens
          </span>
        </h1>
        <p class="text-slate-400 text-sm mt-1.5">
          Personnalisez, gÃ©nÃ©rez un lien unique et partagez-le en un clic.
        </p>
      </div>


      <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  SECTION : IDENTITÃ‰
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 space-y-5">

        <h2 class="font-display font-600 text-sm uppercase tracking-widest text-slate-400">
          IdentitÃ©
        </h2>

        <!-- Nom & Bio -->
        <div class="space-y-3">
          <div>
            <label class="block text-xs font-500 text-slate-400 mb-1.5">Nom / Pseudo</label>
            <input id="inp-name" type="text" placeholder="ex: Alex Martin ğŸš€" maxlength="60"
              class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-2.5 text-sm
                     text-slate-100 placeholder-slate-500 focus:outline-none focus:border-indigo-500
                     focus:ring-1 focus:ring-indigo-500 transition" />
          </div>
          <div>
            <label class="block text-xs font-500 text-slate-400 mb-1.5">Bio courte</label>
            <textarea id="inp-bio" placeholder="Designer â€¢ Dev â€¢ CrÃ©ateur de contenu âœ¨"
              rows="2" maxlength="160"
              class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-2.5 text-sm
                     text-slate-100 placeholder-slate-500 focus:outline-none focus:border-indigo-500
                     focus:ring-1 focus:ring-indigo-500 transition resize-none"></textarea>
          </div>
        </div>

        <div class="border-t border-slate-800"></div>

        <!-- â”€â”€ Style d'avatar â”€â”€ -->
        <div class="space-y-3">
          <label class="block text-xs font-500 text-slate-400">Style d'avatar</label>

          <!-- SÃ©lecteur 3 types -->
          <div class="grid grid-cols-3 gap-2">

            <button data-av="lt" onclick="selectAvatarType(this)"
              class="av-type-opt flex flex-col items-center gap-2 py-3 px-2 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 text-slate-400 hover:text-slate-200
                     transition cursor-pointer text-xs">
              <div class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-violet-600
                          flex items-center justify-center text-white text-sm font-bold">A</div>
              Initiale
            </button>

            <button data-av="em" onclick="selectAvatarType(this)"
              class="av-type-opt flex flex-col items-center gap-2 py-3 px-2 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 text-slate-400 hover:text-slate-200
                     transition cursor-pointer text-xs">
              <div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center text-2xl">
                ğŸ˜Š
              </div>
              Emoji
            </button>

            <button data-av="im" onclick="selectAvatarType(this)"
              class="av-type-opt flex flex-col items-center gap-2 py-3 px-2 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 text-slate-400 hover:text-slate-200
                     transition cursor-pointer text-xs">
              <div class="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center">
                <i class="fa-solid fa-image text-slate-400 text-lg"></i>
              </div>
              Image URL
            </button>

          </div>

          <!-- Input emoji â€” visible si type = em -->
          <div id="avatar-emoji-wrap" class="hidden">
            <label class="block text-xs text-slate-400 mb-1.5">Choisissez un emoji</label>
            <input id="inp-avatar-emoji" type="text" placeholder="ğŸ˜Š" maxlength="4"
              class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-3xl
                     text-center text-slate-100 placeholder-slate-600 focus:outline-none
                     focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"
              oninput="updatePreview()" />
          </div>

          <!-- Input image URL â€” visible si type = im -->
          <div id="avatar-image-wrap" class="hidden">
            <label class="block text-xs text-slate-400 mb-1.5">URL de votre photo</label>
            <input id="inp-avatar-img" type="url" placeholder="https://example.com/photo.jpg"
              class="w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-2.5 text-sm
                     text-slate-100 placeholder-slate-500 focus:outline-none focus:border-indigo-500
                     focus:ring-1 focus:ring-indigo-500 transition"
              oninput="updatePreview()" />
          </div>

        </div>
      </div>


      <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  SECTION : THÃˆME DES BOUTONS
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 space-y-4">

        <h2 class="font-display font-600 text-sm uppercase tracking-widest text-slate-400">
          ThÃ¨me des boutons
        </h2>

        <div class="grid grid-cols-3 gap-2.5">

          <button data-theme="blue" onclick="selectTheme(this)"
            class="theme-opt group flex flex-col items-center gap-1.5 p-3 rounded-xl border-2
                   border-slate-700 hover:border-indigo-500 transition cursor-pointer">
            <div class="w-full h-8 rounded-lg bg-gradient-to-r from-blue-500 to-blue-700"></div>
            <span class="text-xs text-slate-400 group-hover:text-slate-200 transition">Bleu classique</span>
          </button>

          <button data-theme="insta" onclick="selectTheme(this)"
            class="theme-opt group flex flex-col items-center gap-1.5 p-3 rounded-xl border-2
                   border-slate-700 hover:border-indigo-500 transition cursor-pointer">
            <div class="w-full h-8 rounded-lg bg-gradient-to-r from-amber-400 via-pink-500 to-violet-500"></div>
            <span class="text-xs text-slate-400 group-hover:text-slate-200 transition">DÃ©gradÃ© Insta</span>
          </button>

          <button data-theme="black" onclick="selectTheme(this)"
            class="theme-opt group flex flex-col items-center gap-1.5 p-3 rounded-xl border-2
                   border-slate-700 hover:border-indigo-500 transition cursor-pointer">
            <div class="w-full h-8 rounded-lg bg-gradient-to-r from-zinc-900 to-zinc-700 border border-zinc-600"></div>
            <span class="text-xs text-slate-400 group-hover:text-slate-200 transition">Noir minimaliste</span>
          </button>

          <button data-theme="green" onclick="selectTheme(this)"
            class="theme-opt group flex flex-col items-center gap-1.5 p-3 rounded-xl border-2
                   border-slate-700 hover:border-indigo-500 transition cursor-pointer">
            <div class="w-full h-8 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600"></div>
            <span class="text-xs text-slate-400 group-hover:text-slate-200 transition">Vert nature</span>
          </button>

          <button data-theme="rose" onclick="selectTheme(this)"
            class="theme-opt group flex flex-col items-center gap-1.5 p-3 rounded-xl border-2
                   border-slate-700 hover:border-indigo-500 transition cursor-pointer">
            <div class="w-full h-8 rounded-lg bg-gradient-to-r from-rose-500 to-pink-600"></div>
            <span class="text-xs text-slate-400 group-hover:text-slate-200 transition">Rose vibrant</span>
          </button>

          <button data-theme="glass" onclick="selectTheme(this)"
            class="theme-opt group flex flex-col items-center gap-1.5 p-3 rounded-xl border-2
                   border-slate-700 hover:border-indigo-500 transition cursor-pointer">
            <div class="w-full h-8 rounded-lg bg-white/10 border border-white/20 backdrop-blur-sm"></div>
            <span class="text-xs text-slate-400 group-hover:text-slate-200 transition">Verre givrÃ©</span>
          </button>

        </div>
      </div>


      <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  SECTION : STYLE & TYPOGRAPHIE
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 space-y-6">

        <h2 class="font-display font-600 text-sm uppercase tracking-widest text-slate-400">
          Style &amp; Typographie
        </h2>

        <!-- Arrondi des boutons : 3 choix visuels -->
        <div class="space-y-2.5">
          <label class="block text-xs font-500 text-slate-400">Arrondi des boutons</label>

          <div class="grid grid-cols-3 gap-2">

            <button data-radius="rounded-none" onclick="selectRadius(this)"
              class="radius-opt flex flex-col items-center gap-2 py-3 px-2 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 text-slate-400 hover:text-slate-200
                     transition cursor-pointer text-xs">
              <div class="w-12 h-5 bg-indigo-500/25 border border-indigo-400/40 rounded-none"></div>
              CarrÃ©
            </button>

            <button data-radius="rounded-xl" onclick="selectRadius(this)"
              class="radius-opt flex flex-col items-center gap-2 py-3 px-2 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 text-slate-400 hover:text-slate-200
                     transition cursor-pointer text-xs">
              <div class="w-12 h-5 bg-indigo-500/25 border border-indigo-400/40 rounded-xl"></div>
              Arrondi
            </button>

            <button data-radius="rounded-full" onclick="selectRadius(this)"
              class="radius-opt flex flex-col items-center gap-2 py-3 px-2 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 text-slate-400 hover:text-slate-200
                     transition cursor-pointer text-xs">
              <div class="w-12 h-5 bg-indigo-500/25 border border-indigo-400/40 rounded-full"></div>
              Pilule
            </button>

          </div>
        </div>

        <div class="border-t border-slate-800"></div>

        <!-- Police : 4 familles typographiques -->
        <div class="space-y-2.5">
          <label class="block text-xs font-500 text-slate-400">Typographie</label>

          <div class="grid grid-cols-2 gap-2">

            <button data-font="syne" onclick="selectFont(this)"
              class="font-opt flex flex-col items-start gap-1 p-3.5 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 transition cursor-pointer group">
              <span class="text-lg font-bold text-slate-200 leading-none"
                    style="font-family:'Syne',sans-serif">Aa</span>
              <span class="text-xs text-slate-500 group-hover:text-slate-300 transition">
                Moderne Â· Syne
              </span>
            </button>

            <button data-font="inter" onclick="selectFont(this)"
              class="font-opt flex flex-col items-start gap-1 p-3.5 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 transition cursor-pointer group">
              <span class="text-lg font-bold text-slate-200 leading-none"
                    style="font-family:'Inter',sans-serif">Aa</span>
              <span class="text-xs text-slate-500 group-hover:text-slate-300 transition">
                Propre Â· Inter
              </span>
            </button>

            <button data-font="playfair" onclick="selectFont(this)"
              class="font-opt flex flex-col items-start gap-1 p-3.5 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 transition cursor-pointer group">
              <span class="text-lg font-bold text-slate-200 leading-none"
                    style="font-family:'Playfair Display',serif">Aa</span>
              <span class="text-xs text-slate-500 group-hover:text-slate-300 transition">
                Ã‰lÃ©gant Â· Playfair
              </span>
            </button>

            <button data-font="mono" onclick="selectFont(this)"
              class="font-opt flex flex-col items-start gap-1 p-3.5 rounded-xl border-2
                     border-slate-700 hover:border-indigo-500 transition cursor-pointer group">
              <span class="text-lg font-bold text-slate-200 leading-none"
                    style="font-family:'JetBrains Mono',monospace">Aa</span>
              <span class="text-xs text-slate-500 group-hover:text-slate-300 transition">
                Technique Â· Mono
              </span>
            </button>

          </div>
        </div>

      </div>


      <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  SECTION : LIENS
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="bg-slate-900 border border-slate-800 rounded-2xl p-6 space-y-4">

        <div class="flex items-center justify-between">
          <h2 class="font-display font-600 text-sm uppercase tracking-widest text-slate-400">
            Liens
          </h2>
          <div class="flex items-center gap-2">
            <span id="link-count"
              class="text-xs bg-indigo-500/20 text-indigo-300 px-2 py-0.5 rounded-full">
              0 lien
            </span>
            <span class="text-xs text-slate-600 hidden sm:inline">
              Â· icÃ´nes auto-dÃ©tectÃ©es
            </span>
          </div>
        </div>

        <!-- Conteneur liens dynamiques -->
        <div id="links-container" class="space-y-3"></div>

        <!-- Bouton Ajouter -->
        <button onclick="addLink()"
          class="w-full flex items-center justify-center gap-2 py-2.5 border-2 border-dashed
                 border-slate-700 rounded-xl text-sm text-slate-400 hover:border-indigo-500
                 hover:text-indigo-400 transition group">
          <i class="fa-solid fa-plus text-xs transition-transform duration-300 group-hover:rotate-90"></i>
          Ajouter un lien
        </button>

      </div>


      <!-- Bouton GÃ©nÃ©rer -->
      <button onclick="generateURL()"
        class="w-full relative overflow-hidden font-display font-700 text-white py-4 rounded-2xl
               text-base tracking-wide transition-all duration-300 hover:scale-[1.01]
               hover:shadow-2xl hover:shadow-indigo-500/30 active:scale-[0.99]"
        style="background: linear-gradient(135deg, #6366f1, #8b5cf6, #06b6d4)">
        <span class="relative z-10 flex items-center justify-center gap-2.5">
          <i class="fa-solid fa-wand-magic-sparkles"></i>
          GÃ©nÃ©rer mon lien de partage
        </span>
        <span class="absolute inset-0 bg-white/10 opacity-0 hover:opacity-100 transition-opacity duration-300"></span>
      </button>


      <!-- â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           â”‚  ZONE URL GÃ‰NÃ‰RÃ‰E
           â”‚
           â”‚  CORRECTIF COPIE :
           â”‚  On utilise une <textarea readonly> VISIBLE avec
           â”‚  user-select:text, ce qui est l'approche la plus
           â”‚  fiable sur tous les navigateurs et mobiles.
           â”‚  Plus de div fantÃ´me ni d'input invisible.
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div id="url-output"
        class="hidden glow-border rounded-2xl bg-slate-900 border border-slate-800 p-6 space-y-4">

        <!-- Badge succÃ¨s -->
        <div class="flex items-center gap-2 text-emerald-400">
          <i class="fa-solid fa-circle-check text-sm"></i>
          <span class="text-sm font-500">Lien gÃ©nÃ©rÃ© avec succÃ¨s !</span>
        </div>

        <!-- Label explicatif -->
        <p class="text-xs text-slate-500">
          Cliquez sur le lien pour le sÃ©lectionner, puis copiez-le.
        </p>

        <!-- âœ… TEXTAREA VISIBLE â€” sÃ©lectionnable nativement partout -->
        <textarea id="url-display"
          readonly
          onclick="this.select();"
          placeholder="Votre lien apparaÃ®tra iciâ€¦"
          spellcheck="false"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
        ></textarea>

        <!-- Actions -->
        <div class="flex gap-2">

          <!-- Bouton copier -->
          <button onclick="copyURL()" id="copy-btn"
            class="flex-1 flex items-center justify-center gap-3 bg-indigo-600 hover:bg-indigo-500
                   text-white font-bold py-4 rounded-2xl shadow-xl active:scale-95 transition-all">
            <i id="copy-icon" class="fa-regular fa-copy text-sm"></i>
            <span id="copy-label">Copier le lien</span>
          </button>

          <!-- Bouton ouvrir dans un onglet -->
          <a id="preview-btn" href="#" target="_blank" rel="noopener noreferrer"
            class="flex items-center justify-center bg-slate-800 px-6 rounded-2xl
                   border border-slate-700 text-slate-300 hover:bg-slate-700 transition"
            title="Ouvrir la page visiteur">
            <i class="fa-solid fa-arrow-up-right-from-square"></i>
          </a>

        </div>

      </div>

    </div><!-- /PANNEAU GAUCHE -->


    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         PANNEAU DROIT : AperÃ§u en direct (desktop uniquement)
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <div class="hidden lg:flex lg:col-span-2 flex-col">
      <div class="sticky top-24">

        <p class="text-xs text-slate-500 uppercase tracking-widest mb-3 font-500">
          AperÃ§u en direct
        </p>

        <!-- Cadre tÃ©lÃ©phone -->
        <div class="relative mx-auto w-[240px]">
          <div class="bg-slate-800 border-2 border-slate-700 rounded-[2rem] overflow-hidden
                      shadow-2xl shadow-black/60">

            <!-- Encoche -->
            <div class="bg-slate-800 flex justify-center pt-2 pb-1">
              <div class="w-16 h-1.5 bg-slate-700 rounded-full"></div>
            </div>

            <!-- Ã‰cran du preview -->
            <div id="preview-screen"
              class="bg-slate-950 min-h-[440px] p-4 flex flex-col items-center gap-3
                     transition-all duration-500 overflow-hidden">

              <!-- En-tÃªte profil -->
              <div class="text-center mt-3 space-y-1.5 w-full">

                <div id="prev-avatar"
                  class="w-14 h-14 rounded-full bg-gradient-to-br from-indigo-500 to-violet-600
                         flex items-center justify-center text-white text-xl font-bold
                         mx-auto overflow-hidden">
                  ?
                </div>

                <p id="prev-name" class="font-bold text-white text-sm mt-1">Votre Nom</p>
                <p id="prev-bio"  class="text-slate-400 text-[10px] leading-relaxed px-2">
                  Votre bioâ€¦
                </p>
              </div>

              <!-- Liens preview -->
              <div id="prev-links" class="w-full space-y-1.5 mt-1"></div>

            </div>
          </div>
        </div>

      </div>
    </div><!-- /PANNEAU DROIT -->

  </div><!-- /grille principale -->
</div><!-- /#creator-app -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â–ˆâ–ˆ  VISITOR INTERFACE
     CachÃ© par dÃ©faut.
     Rendu + creator supprimÃ© quand ?p= est prÃ©sent dans l'URL.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<div id="visitor-app"
  class="hidden min-h-screen flex items-center justify-center py-16 px-4 transition-all duration-500">

  <div class="w-full max-w-sm mx-auto">

    <!-- Avatar + identitÃ© -->
    <div class="text-center mb-8 space-y-3">

      <div id="v-avatar"
        class="w-20 h-20 rounded-full bg-gradient-to-br from-indigo-500 to-violet-600
               flex items-center justify-center text-white text-3xl font-bold
               mx-auto avatar-pulse shadow-xl overflow-hidden">
      </div>

      <div>
        <h1 id="v-name" class="font-display font-800 text-2xl text-white"></h1>
        <p  id="v-bio"  class="text-slate-400 text-sm mt-1.5 leading-relaxed max-w-xs mx-auto"></p>
      </div>

    </div>

    <!-- Boutons de liens (injectÃ©s par JS) -->
    <div id="v-links" class="space-y-3"></div>

    <!-- Pied de page discret -->
    <p class="visitor-watermark text-center text-slate-600 text-xs mt-12">
      CrÃ©Ã© avec <span class="text-indigo-400 font-500">BioLink Maker</span>
    </p>

  </div>
</div><!-- /#visitor-app -->


<!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
     â–ˆâ–ˆ  JAVASCRIPT â€” code aÃ©rÃ© et commentÃ©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
<script>

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1.  STATE GLOBAL
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

let selectedTheme      = 'blue';        // ThÃ¨me de couleur des boutons
let selectedRadius     = 'rounded-xl';  // Arrondi des boutons (clÃ© URL : r)
let selectedFont       = 'syne';        // Famille typographique (clÃ© URL : f)
let selectedDarkMode   = 1;             // 1 = sombre, 0 = clair (clÃ© URL : m)
let selectedAvatarType = 'lt';          // lt | em | im (clÃ© URL : av)
let linkIdCounter      = 0;             // Compteur incrÃ©mental pour les IDs de liens


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   2.  MAPS & CONSTANTES
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

// Fonds page visiteur (2 modes Ã— 6 thÃ¨mes)
const VISITOR_BG = {
  dark  : {
    blue : 'vbg-dark-blue',  insta: 'vbg-dark-insta',  black: 'vbg-dark-black',
    green: 'vbg-dark-green', rose : 'vbg-dark-rose',   glass: 'vbg-dark-glass'
  },
  light : {
    blue : 'vbg-light-blue',  insta: 'vbg-light-insta',  black: 'vbg-light-black',
    green: 'vbg-light-green', rose : 'vbg-light-rose',   glass: 'vbg-light-glass'
  }
};

// Fond de l'Ã©cran du preview tÃ©lÃ©phone
const PREVIEW_BG = {
  blue : 'bg-slate-950', insta: 'bg-[#1a0a2e]', black: 'bg-black',
  green: 'bg-[#052e16]', rose : 'bg-[#1f0a10]', glass: 'bg-slate-950'
};

// Police â†’ font-family CSS
const FONT_STACK = {
  syne    : "'Syne', sans-serif",
  inter   : "'Inter', sans-serif",
  playfair: "'Playfair Display', serif",
  mono    : "'JetBrains Mono', monospace"
};

// â”€â”€ TABLE D'ICÃ”NES AUTOMATIQUES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const ICON_KEYWORDS = {
  // â”€â”€ RÃ©seaux sociaux â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  'instagram'  : 'fa-brands fa-instagram',
  'insta'      : 'fa-brands fa-instagram',
  'twitter'    : 'fa-brands fa-x-twitter',
  'tiktok'     : 'fa-brands fa-tiktok',
  'youtube'    : 'fa-brands fa-youtube',
  'facebook'   : 'fa-brands fa-facebook-f',
  'linkedin'   : 'fa-brands fa-linkedin-in',
  'github'     : 'fa-brands fa-github',
  'discord'    : 'fa-brands fa-discord',
  'twitch'     : 'fa-brands fa-twitch',
  'spotify'    : 'fa-brands fa-spotify',
  'snapchat'   : 'fa-brands fa-snapchat',
  'snap'       : 'fa-brands fa-snapchat',
  'pinterest'  : 'fa-brands fa-pinterest-p',
  'reddit'     : 'fa-brands fa-reddit-alien',
  'telegram'   : 'fa-brands fa-telegram',
  'whatsapp'   : 'fa-brands fa-whatsapp',
  'patreon'    : 'fa-brands fa-patreon',
  'paypal'     : 'fa-brands fa-paypal',
  'mastodon'   : 'fa-brands fa-mastodon',
  'threads'    : 'fa-brands fa-threads',
  // â”€â”€ Contenu & crÃ©ativitÃ© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  'substack'   : 'fa-solid fa-newspaper',
  'newsletter' : 'fa-solid fa-newspaper',
  'podcast'    : 'fa-solid fa-microphone-lines',
  'blog'       : 'fa-solid fa-pen-nib',
  'article'    : 'fa-solid fa-pen-nib',
  'musique'    : 'fa-solid fa-music',
  'music'      : 'fa-solid fa-music',
  'photo'      : 'fa-solid fa-camera',
  'video'      : 'fa-solid fa-video',
  // â”€â”€ Commerce & contact â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  'shop'       : 'fa-solid fa-bag-shopping',
  'boutique'   : 'fa-solid fa-bag-shopping',
  'store'      : 'fa-solid fa-store',
  'email'      : 'fa-solid fa-envelope',
  'mail'       : 'fa-solid fa-envelope',
  'contact'    : 'fa-solid fa-envelope',
  'don'        : 'fa-solid fa-heart',
  'donate'     : 'fa-solid fa-heart',
  'tip'        : 'fa-solid fa-heart',
  // â”€â”€ Portfolio & professionnel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  'portfolio'  : 'fa-solid fa-briefcase',
  'cv'         : 'fa-solid fa-file-lines',
  'resume'     : 'fa-solid fa-file-lines',
  'site'       : 'fa-solid fa-globe',
  'website'    : 'fa-solid fa-globe',
  // â”€â”€ GÃ©nÃ©rique (toujours en dernier car trÃ¨s court) â”€â”€â”€â”€â”€â”€â”€â”€
  'lien'       : 'fa-solid fa-link',
  'link'       : 'fa-solid fa-link',
};


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3.  ROUTAGE â€” IIFE exÃ©cutÃ©e immÃ©diatement
       Si ?p= est absent â†’ mode CrÃ©ateur (rien Ã  faire)
       Si ?p= est prÃ©sent â†’ mode Visiteur + suppression CrÃ©ateur
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
(function route() {

  const params  = new URLSearchParams(window.location.search);
  const payload = params.get('p');

  // Pas de payload â†’ rester en mode CrÃ©ateur
  if (!payload) return;

  // â”€â”€ Mode Visiteur â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const visitorApp = document.getElementById('visitor-app');
  const creatorApp = document.getElementById('creator-app');

  try {

    // DÃ©coder : Base64 â†’ decodeURIComponent â†’ JSON â†’ objet
    const json = decodeURIComponent(atob(payload));
    const data = JSON.parse(json);

    renderVisitor(data);

  } catch (err) {

    // URL corrompue â†’ page d'erreur propre
    visitorApp.innerHTML = `
      <div class="text-center py-24 px-6 text-slate-400">
        <i class="fa-solid fa-triangle-exclamation text-5xl text-slate-700 mb-5 block"></i>
        <p class="font-display text-xl font-600 text-slate-300 mb-2">
          Lien invalide ou corrompu
        </p>
        <p class="text-sm text-slate-500">
          L'URL a peut-Ãªtre Ã©tÃ© modifiÃ©e manuellement.
        </p>
        <a href="${window.location.pathname}"
           class="inline-flex items-center gap-2 mt-6 text-indigo-400 text-sm
                  hover:text-indigo-300 transition">
          <i class="fa-solid fa-arrow-left text-xs"></i>
          CrÃ©er ma propre page
        </a>
      </div>`;
    visitorApp.className = 'min-h-screen flex items-center justify-center vbg-dark-blue';

  }

  // Afficher le mode visiteur
  visitorApp.classList.remove('hidden');

  // â”€â”€ SUPPRESSION STRICTE du CrÃ©ateur du DOM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  creatorApp.remove();

})();


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   4.  SÃ‰LECTEURS D'OPTIONS (Creator)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

// â”€â”€ ThÃ¨me â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectTheme(btn) {
  document.querySelectorAll('.theme-opt').forEach(b =>
    b.classList.remove('border-indigo-500', 'bg-indigo-500/10')
  );
  btn.classList.add('border-indigo-500', 'bg-indigo-500/10');
  selectedTheme = btn.dataset.theme;
  updatePreview();
}

// â”€â”€ Arrondi â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectRadius(btn) {
  document.querySelectorAll('.radius-opt').forEach(b => b.classList.remove('opt-active'));
  btn.classList.add('opt-active');
  selectedRadius = btn.dataset.radius;
  updatePreview();
}

// â”€â”€ Police â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectFont(btn) {
  document.querySelectorAll('.font-opt').forEach(b => b.classList.remove('opt-active'));
  btn.classList.add('opt-active');
  selectedFont = btn.dataset.font;
  updatePreview();
}

// â”€â”€ Style d'avatar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function selectAvatarType(btn) {
  document.querySelectorAll('.av-type-opt').forEach(b => b.classList.remove('opt-active'));
  btn.classList.add('opt-active');
  selectedAvatarType = btn.dataset.av;

  // Afficher / masquer les champs conditionnels
  document.getElementById('avatar-emoji-wrap').classList.toggle(
    'hidden', selectedAvatarType !== 'em'
  );
  document.getElementById('avatar-image-wrap').classList.toggle(
    'hidden', selectedAvatarType !== 'im'
  );

  updatePreview();
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   5.  TOGGLE MODE JOUR / NUIT
       ContrÃ´le l'apparence que verront les visiteurs.
       DÃ©tection automatique du schÃ©ma systÃ¨me au DOMContentLoaded.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function togglePageMode() {

  selectedDarkMode = selectedDarkMode === 1 ? 0 : 1;

  const icon  = document.getElementById('mode-icon');
  const label = document.getElementById('mode-label');

  if (selectedDarkMode === 1) {
    icon.className    = 'fa-solid fa-moon text-indigo-400 text-[11px]';
    label.textContent = 'Page sombre';
  } else {
    icon.className    = 'fa-solid fa-sun text-amber-400 text-[11px]';
    label.textContent = 'Page claire';
  }

  updatePreview();
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   6.  GESTION DES LIENS
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

// â”€â”€ Ajouter un lien â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function addLink() {

  const container = document.getElementById('links-container');
  const id        = ++linkIdCounter;
  const div       = document.createElement('div');

  div.className  = 'link-item bg-slate-800/50 border border-slate-700 rounded-xl p-4 relative';
  div.dataset.id = id;

  div.innerHTML = `
    <!-- Supprimer -->
    <button onclick="removeLink(${id})"
      class="absolute top-3 right-3 text-slate-600 hover:text-rose-400 transition">
      <i class="fa-solid fa-xmark text-sm"></i>
    </button>

    <!-- Badge icÃ´ne auto-dÃ©tectÃ©e (mis Ã  jour en temps rÃ©el) -->
    <div class="mb-2.5">
      <span id="icon-badge-${id}"
        class="inline-flex items-center gap-1.5 text-xs text-slate-500
               bg-slate-900 px-2 py-0.5 rounded-full transition-all">
        <i class="fa-solid fa-link text-[10px]"></i>
        IcÃ´ne auto
      </span>
    </div>

    <!-- Champs -->
    <div class="grid grid-cols-2 gap-3">
      <div>
        <label class="block text-xs text-slate-400 mb-1">Titre du bouton</label>
        <input type="text" placeholder="ex: Mon Instagram" maxlength="40"
          class="link-title w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2
                 text-sm text-slate-100 placeholder-slate-600 focus:outline-none
                 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"
          oninput="onTitleChange(this, ${id})" />
      </div>
      <div>
        <label class="block text-xs text-slate-400 mb-1">URL</label>
        <input type="url" placeholder="https://â€¦"
          class="link-url w-full bg-slate-900 border border-slate-700 rounded-lg px-3 py-2
                 text-sm text-slate-100 placeholder-slate-600 focus:outline-none
                 focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500 transition"
          oninput="updatePreview()" />
      </div>
    </div>`;

  container.appendChild(div);
  updateLinkCount();
  updatePreview();
}

// â”€â”€ Supprimer un lien (avec fondu de sortie) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function removeLink(id) {
  const el = document.querySelector(`[data-id="${id}"]`);
  if (!el) return;

  el.style.transition = 'opacity .18s ease, transform .18s ease';
  el.style.opacity    = '0';
  el.style.transform  = 'translateY(-6px)';

  setTimeout(() => {
    el.remove();
    updateLinkCount();
    updatePreview();
  }, 190);
}

// â”€â”€ Mise Ã  jour du badge icÃ´ne quand le titre change â”€â”€â”€â”€â”€â”€â”€â”€
function onTitleChange(input, id) {
  const icon  = detectIcon(input.value);
  const badge = document.getElementById(`icon-badge-${id}`);
  if (!badge) return;

  const isGeneric = icon === 'fa-solid fa-link';
  badge.innerHTML   = `<i class="${icon} text-[10px]"></i> IcÃ´ne auto`;
  badge.className   = isGeneric
    ? 'inline-flex items-center gap-1.5 text-xs text-slate-500 bg-slate-900 px-2 py-0.5 rounded-full transition-all'
    : 'inline-flex items-center gap-1.5 text-xs text-indigo-400 bg-indigo-500/10 border border-indigo-500/20 px-2 py-0.5 rounded-full transition-all';

  updatePreview();
}

// â”€â”€ Compteur de liens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function updateLinkCount() {
  const n = document.querySelectorAll('#links-container [data-id]').length;
  document.getElementById('link-count').textContent =
    n === 0 ? '0 lien' : `${n} lien${n > 1 ? 's' : ''}`;
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   7.  DÃ‰TECTION AUTOMATIQUE D'ICÃ”NE
       Cherche le premier mot-clÃ© de ICON_KEYWORDS dans le titre.
       Retourne la classe FA, ou l'icÃ´ne lien gÃ©nÃ©rique en fallback.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function detectIcon(title) {
  const lower = (title || '').toLowerCase();

  for (const [keyword, faClass] of Object.entries(ICON_KEYWORDS)) {
    if (lower.includes(keyword)) return faClass;
  }

  return 'fa-solid fa-link'; // IcÃ´ne de secours
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   8.  COLLECTE DES DONNÃ‰ES â€” CLÃ‰S ULTRA-COURTES
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function collectData() {

  const n  = document.getElementById('inp-name').value.trim();
  const b  = document.getElementById('inp-bio').value.trim();
  const av = selectedAvatarType;

  // Contenu avatar (uniquement si type em ou im)
  let ac = '';
  if (av === 'em') {
    ac = document.getElementById('inp-avatar-emoji').value.trim();
  } else if (av === 'im') {
    ac = document.getElementById('inp-avatar-img').value.trim();
  }

  // Tableau de liens (clÃ©s courtes : t = titre, u = url)
  const l = [];
  document.querySelectorAll('#links-container [data-id]').forEach(div => {
    const t = div.querySelector('.link-title')?.value.trim() || '';
    const u = div.querySelector('.link-url')?.value.trim()   || '';
    if (t || u) l.push({ t, u });
  });

  return { n, b, t: selectedTheme, r: selectedRadius, f: selectedFont,
           m: selectedDarkMode, av, ac, l };
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   9.  GÃ‰NÃ‰RATION DE L'URL
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function generateURL() {
  try {

    const data = collectData();

    // Validation minimale : au moins un nom ou un lien
    if (!data.n && data.l.length === 0) {
      const btn = document.querySelector('[onclick="generateURL()"]');
      btn.classList.add('animate-bounce');
      setTimeout(() => btn.classList.remove('animate-bounce'), 600);
      return;
    }

    // Encodage : JSON â†’ encodeURIComponent â†’ btoa
    const encoded = btoa(encodeURIComponent(JSON.stringify(data)));
    const fullURL = `${window.location.origin}${window.location.pathname}?p=${encoded}`;

    // Mettre Ã  jour la textarea visible
    const textarea = document.getElementById('url-display');
    textarea.value = fullURL;
    textarea.classList.remove('copy-success');

    // Mettre Ã  jour le bouton aperÃ§u
    document.getElementById('preview-btn').href = fullURL;

    // Afficher la zone et scroller vers elle
    const out = document.getElementById('url-output');
    out.classList.remove('hidden');
    out.scrollIntoView({ behavior: 'smooth', block: 'nearest' });

    // SÃ©lectionner automatiquement le texte pour faciliter la copie
    setTimeout(() => textarea.select(), 350);

  } catch (err) {
    console.error('generateURL error:', err);
    alert('Erreur lors de la gÃ©nÃ©ration. VÃ©rifiez vos donnÃ©es.');
  }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   10. COPIE TRIPLE SÃ‰CURITÃ‰
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   MÃ©thode 1 â€” navigator.clipboard.writeText()   (HTTPS, navigateurs modernes)
   MÃ©thode 2 â€” textarea.select() + execCommand   (HTTP, iOS < 13, vieux Android)
   MÃ©thode 3 â€” alert() avec l'URL brute           (filet absolu)
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
async function copyURL() {

  const textarea = document.getElementById('url-display');
  const url      = textarea.value.trim();

  // Rien Ã  copier
  if (!url || url === '') return;

  const btn  = document.getElementById('copy-btn');
  const icon = document.getElementById('copy-icon');
  const lbl  = document.getElementById('copy-label');

  let success = false;

  // â”€â”€ MÃ‰THODE 1 : Clipboard API moderne (HTTPS requis) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (navigator.clipboard && window.isSecureContext) {
    try {
      await navigator.clipboard.writeText(url);
      success = true;
    } catch (err) {
      // Permission refusÃ©e ou API indisponible â†’ fallback silencieux
      console.warn('[copyURL] Clipboard API failed, trying fallbackâ€¦', err);
    }
  }

  // â”€â”€ MÃ‰THODE 2 : select() sur la <textarea> + execCommand â”€â”€â”€â”€â”€â”€â”€â”€â”€
  // La textarea Ã©tant visible et readonly, select() fonctionne
  // nativement sur iOS Safari, Android WebView et tous les vieux navigateurs.
  if (!success) {
    try {
      textarea.focus();
      textarea.setSelectionRange(0, textarea.value.length); // iOS : obligatoire
      textarea.select();
      success = document.execCommand('copy');
      textarea.blur();
    } catch (err) {
      console.warn('[copyURL] execCommand failed:', err);
      success = false;
    }
  }

  // â”€â”€ MÃ‰THODE 3 : alert() â€” filet de sÃ©curitÃ© absolu â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (!success) {
    window.alert('Copiez ce lien manuellement :\n\n' + url);
    success = true; // L'utilisateur a accÃ¨s au lien
  }

  // â”€â”€ Feedback visuel (uniquement si succÃ¨s confirmÃ©) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (success) {

    // Highlight de la textarea
    textarea.classList.add('copy-success');

    // Bouton â†’ vert
    btn.classList.replace('bg-indigo-600', 'bg-emerald-600');
    btn.classList.replace('hover:bg-indigo-500', 'hover:bg-emerald-500');
    icon.className  = 'fa-solid fa-check text-sm';
    lbl.textContent = 'CopiÃ© !';

    // Retour Ã  l'Ã©tat initial aprÃ¨s 2,5 secondes
    setTimeout(() => {
      textarea.classList.remove('copy-success');
      btn.classList.replace('bg-emerald-600', 'bg-indigo-600');
      btn.classList.replace('hover:bg-emerald-500', 'hover:bg-indigo-500');
      icon.className  = 'fa-regular fa-copy text-sm';
      lbl.textContent = 'Copier le lien';
    }, 2500);
  }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   11. HELPER AVATAR â€” affichage dans un conteneur
       UtilisÃ© Ã  la fois par le preview tÃ©lÃ©phone et la page visiteur.
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderAvatarIn(container, data, size = 'sm') {

  // Classes de base communes
  const base = size === 'lg'
    ? 'w-20 h-20 text-3xl'
    : 'w-14 h-14 text-xl';

  const baseClass = `${base} rounded-full flex items-center justify-center font-bold overflow-hidden`;

  if (data.av === 'im' && data.ac) {

    // Image depuis URL externe
    container.style.background = 'transparent';
    container.innerHTML = '';
    const img = document.createElement('img');
    img.src       = data.ac;
    img.alt       = 'Avatar';
    img.className = 'w-full h-full object-cover';
    img.onerror   = () => { container.textContent = data.n ? data.n[0].toUpperCase() : '?'; };
    container.appendChild(img);

  } else if (data.av === 'em' && data.ac) {

    // Emoji
    container.innerHTML    = data.ac;
    container.style.background = 'linear-gradient(135deg, #1e293b, #334155)';

  } else {

    // Lettre initiale (dÃ©faut)
    container.innerHTML    = data.n ? data.n[0].toUpperCase() : '?';
    container.style.background = '';

  }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   12. APERÃ‡U EN DIRECT (Desktop) â€” mis Ã  jour en temps rÃ©el
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function updatePreview() {

  const data      = collectData();
  const screen    = document.getElementById('preview-screen');
  const prevLinks = document.getElementById('prev-links');
  const prevAv    = document.getElementById('prev-avatar');

  // â”€â”€ Police â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  screen.style.fontFamily = FONT_STACK[data.f] || FONT_STACK.syne;

  // â”€â”€ Fond du tÃ©lÃ©phone (thÃ¨me + mode) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  if (data.m === 0) {
    screen.className = 'min-h-[440px] p-4 flex flex-col items-center gap-3 transition-all duration-500 overflow-hidden';
    screen.style.background = 'linear-gradient(160deg, #f8fafc 0%, #e2e8f0 100%)';
  } else {
    screen.style.background = '';
    screen.className =
      `min-h-[440px] p-4 flex flex-col items-center gap-3 transition-all duration-500 overflow-hidden ` +
      (PREVIEW_BG[data.t] || 'bg-slate-950');
  }

  // â”€â”€ Avatar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  renderAvatarIn(prevAv, data, 'sm');

  // â”€â”€ Nom & bio â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const nameEl = document.getElementById('prev-name');
  const bioEl  = document.getElementById('prev-bio');
  nameEl.textContent   = data.n || 'Votre Nom';
  bioEl.textContent    = data.b || 'Votre bioâ€¦';
  nameEl.style.color   = data.m === 0 ? '#1e293b' : '#fff';
  bioEl.style.color    = data.m === 0 ? '#64748b' : '#94a3b8';
  nameEl.style.fontFamily = FONT_STACK[data.f] || FONT_STACK.syne;

  // â”€â”€ Boutons de liens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  prevLinks.innerHTML = '';

  data.l.slice(0, 4).forEach(link => {
    const btn  = document.createElement('div');
    const icon = detectIcon(link.t);

    btn.className =
      `w-full theme-${data.t} text-[10px] font-500 py-1.5 px-2.5 truncate transition ` +
      `flex items-center justify-center gap-1.5 ` +
      (data.r || 'rounded-xl');

    btn.style.fontFamily = FONT_STACK[data.f] || FONT_STACK.syne;
    btn.innerHTML = `<i class="${icon} text-[9px] opacity-80"></i><span>${link.t || 'Lien sans titre'}</span>`;
    prevLinks.appendChild(btn);
  });

  if (data.l.length > 4) {
    const more = document.createElement('p');
    more.className   = 'text-center text-[9px]';
    more.style.color = data.m === 0 ? '#94a3b8' : '#475569';
    more.textContent = `+${data.l.length - 4} autre(s)â€¦`;
    prevLinks.appendChild(more);
  }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   13. RENDU PAGE VISITEUR
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function renderVisitor(data) {
  try {

    const vApp   = document.getElementById('visitor-app');
    const theme  = data.t  || 'blue';
    const radius = data.r  || 'rounded-xl';
    const font   = data.f  || 'syne';
    const mode   = data.m  === 0 ? 'light' : 'dark';

    // â”€â”€ Fond de la page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const bgClass = (VISITOR_BG[mode] || VISITOR_BG.dark)[theme] || 'vbg-dark-blue';
    vApp.className =
      `min-h-screen flex items-center justify-center py-16 px-4 transition-all duration-500 ${bgClass}`;

    // Classe texte clair si mode light
    if (mode === 'light') vApp.classList.add('visitor-light');

    // â”€â”€ Police de la page â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.body.style.fontFamily = FONT_STACK[font] || FONT_STACK.syne;

    // â”€â”€ Avatar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const vAv = document.getElementById('v-avatar');
    renderAvatarIn(vAv, data, 'lg');

    // â”€â”€ Nom & bio â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.getElementById('v-name').textContent = data.n || '';
    document.getElementById('v-bio').textContent  = data.b || '';

    // â”€â”€ Titre de l'onglet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    document.title = (data.n ? `${data.n} â€” ` : '') + 'BioLink';

    // â”€â”€ Boutons de liens â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    const linksEl = document.getElementById('v-links');
    linksEl.innerHTML = '';

    (data.l || []).forEach((link, i) => {
      if (!link.t && !link.u) return;

      const icon = detectIcon(link.t);

      const a = document.createElement('a');
      a.href   = link.u || '#';
      a.target = '_blank';
      a.rel    = 'noopener noreferrer';

      // Animation en cascade : dÃ©lai croissant par lien
      a.style.animationDelay = `${i * 90}ms`;

      a.className =
        `visitor-link flex items-center justify-center gap-3 w-full text-center font-500 ` +
        `text-base py-4 px-6 shadow-lg theme-${theme} ` +
        `hover:scale-[1.02] hover:-translate-y-0.5 active:scale-[0.98] ` +
        `transition-all duration-200 cursor-pointer ${radius}`;

      a.innerHTML = `
        <i class="${icon} text-sm opacity-90"></i>
        <span>${link.t || link.u}</span>`;

      linksEl.appendChild(a);
    });

  } catch (err) {
    console.error('renderVisitor error:', err);
  }
}


/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   14. INITIALISATION â€” DOMContentLoaded
   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
document.addEventListener('DOMContentLoaded', () => {

  // â”€â”€ DÃ©tecter prefers-color-scheme du systÃ¨me â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  selectedDarkMode  = prefersDark ? 1 : 0;

  // Synchroniser l'icÃ´ne du toggle avec le mode dÃ©tectÃ©
  const icon  = document.getElementById('mode-icon');
  const label = document.getElementById('mode-label');
  if (icon && label) {
    icon.className    = selectedDarkMode === 1
      ? 'fa-solid fa-moon text-indigo-400 text-[11px]'
      : 'fa-solid fa-sun text-amber-400 text-[11px]';
    label.textContent = selectedDarkMode === 1 ? 'Page sombre' : 'Page claire';
  }

  // â”€â”€ Binding inputs texte â†’ aperÃ§u live â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const nameInp = document.getElementById('inp-name');
  const bioInp  = document.getElementById('inp-bio');
  if (nameInp) nameInp.addEventListener('input', updatePreview);
  if (bioInp)  bioInp.addEventListener('input',  updatePreview);

  // â”€â”€ SÃ©lections par dÃ©faut â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const defaultTheme = document.querySelector('.theme-opt[data-theme="blue"]');
  if (defaultTheme) selectTheme(defaultTheme);

  const defaultRadius = document.querySelector('.radius-opt[data-radius="rounded-xl"]');
  if (defaultRadius) selectRadius(defaultRadius);

  const defaultFont = document.querySelector('.font-opt[data-font="syne"]');
  if (defaultFont) selectFont(defaultFont);

  const defaultAv = document.querySelector('.av-type-opt[data-av="lt"]');
  if (defaultAv) selectAvatarType(defaultAv);

});

</script>
</body>
</html>
